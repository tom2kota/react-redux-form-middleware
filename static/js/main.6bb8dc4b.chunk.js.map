{"version":3,"sources":["components/requireAuth.js","components/CommentBox.js","actions/index.js","actions/types.js","components/CommentList.js","components/App.js","reducers/index.js","reducers/comments.js","reducers/auth.js","middlewares/async.js","middlewares/stateSchema.js","middlewares/stateValidator.js","Root.js","index.js"],"names":["CommentBox","state","comment","handleChange","event","setState","target","value","handleSubmit","preventDefault","props","saveComment","className","onSubmit","this","onChange","type","placeholder","autoComplete","onClick","fetchComments","Component","connect","payload","axios","get","ChildComponent","ComposedComponent","navigateRestriction","auth","history","push","prevProps","prevState","snapshot","requireAuth","CommentList","comments","map","key","shortid","generate","style","overflow","whiteSpace","maxHeight","listStyle","padding","margin","renderComments","App","renderButton","changeAuth","to","href","rel","paddingTop","path","component","exact","renderMenu","isLoggedIn","console","log","combineReducers","action","data","name","dispatch","next","then","response","newAction","getState","tv4","validate","stateSchema","warn","children","initialState","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","asyncMiddleware","stateSchemaMiddleware","ReactDOM","render","Root","document","querySelector"],"mappings":"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","file":"static/js/main.6bb8dc4b.chunk.js","sourcesContent":["// HOC component helps to avoid repeated logic\nimport React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\n\nexport default (ChildComponent) => {\n    class ComposedComponent extends Component {\n\n        componentDidMount() {\n            this.navigateRestriction()\n        }\n\n        componentDidUpdate(prevProps, prevState, snapshot) {\n            this.navigateRestriction()\n        }\n\n        navigateRestriction = () => (!this.props.auth) ? this.props.history.push('/') : null\n\n        render() {\n            return <ChildComponent {...this.props} />\n        }\n    }\n\n    const mapStateToProps = (state) => ({auth: state.auth})\n\n    return connect(mapStateToProps)(ComposedComponent)\n}","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport {saveComment, fetchComments} from \"actions\";\nimport requireAuth from \"components/requireAuth\";\n\nclass CommentBox extends Component {\n    state = {comment: ''}\n\n    handleChange = (event) => this.setState({comment: event.target.value})\n\n    handleSubmit = event => {\n        event.preventDefault();\n        this.props.saveComment(this.state.comment);\n        this.setState({comment: ''})\n    }\n\n    render() {\n        return (\n            <div className=\"column\">\n                <div className=\"ui icon header blue\">\n                    <i className=\"paper plane outline blue icon\"/>\n                    ADD NEW MESSAGE\n                </div>\n                <form onSubmit={this.handleSubmit}>\n                    <div className=\"field\">\n                        <div className=\"ui search\">\n                            <div className=\"ui left icon input\">\n                                <input onChange={this.handleChange} value={this.state.comment}\n                                       className=\"prompt\"\n                                       type=\"text\"\n                                       placeholder=\"Add message ...\"\n                                       autoComplete=\"off\"/>\n                                <i className=\"terminal blue icon\"/>\n                            </div>\n                        </div>\n                    </div>\n                    <br/>\n                    <div className=\"field\">\n                        <button className=\"ui fluid blue large labeled icon button\">\n                            <i className=\"add icon\"/>\n                            ADD MESSAGE\n                        </button>\n                    </div>\n                    <br/>\n                </form>\n                <div className=\"field\">\n                    <button onClick={this.props.fetchComments}\n                            className=\"fetch-comments ui fluid yellow large labeled icon button\">\n                        <i className=\"download icon\"/>\n                        FETCH COMMENTS\n                    </button>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = null\n\nexport default connect(mapStateToProps, {saveComment, fetchComments})(requireAuth(CommentBox))","import axios from \"axios\";\nimport {SAVE_COMMENT, FETCH_COMMENTS, CHANGE_AUTH} from \"actions/types\"\n\nexport function saveComment(comment) {\n    return {\n        type: SAVE_COMMENT,\n        payload: comment\n    }\n}\n\nexport function fetchComments() {\n    const response = axios.get('https://json-server-comment.herokuapp.com/comments')\n    return {\n        type: FETCH_COMMENTS,\n        payload: response\n    }\n}\n\nexport function changeAuth(isLoggedIn) {\n    console.log('changeAuth action isLoggedIn', isLoggedIn)\n    return {\n        type: CHANGE_AUTH,\n        payload: isLoggedIn\n    }\n}","export const SAVE_COMMENT = 'save_comment';\nexport const FETCH_COMMENTS = 'fetch_comments';\nexport const CHANGE_AUTH = 'change_auth';","import React, {Component} from \"react\";\nimport {connect} from \"react-redux\";\nimport shortid from 'shortid';\n\nclass CommentList extends Component {\n\n    renderComments() {\n        return this.props.comments.map(comment => <li className=\"item\" key={shortid.generate()}><i\n            className=\"right blue triangle icon\"/> {comment}</li>)\n    }\n\n    render() {\n        return (\n            <div className=\"column\">\n                <div className=\"ui icon blue header\">\n                    <i className=\"comment alternate outline blue icon\"/>\n                    Display Message\n                </div>\n                <div className=\"ui padded segment\">\n                    <div className=\"ui link list left aligned header large content\"\n                         style={{\n                             overflow: 'scroll',\n                             whiteSpace: 'wrap',\n                             maxHeight: '150px',\n                         }}>\n                        <ul style={{\n                            listStyle: 'none',\n                            padding: 0,\n                            margin: 0\n                        }}> {this.renderComments()}</ul>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({comments: state.comments})\n\nexport default connect(mapStateToProps)(CommentList)","import React, {Component} from \"react\";\nimport {Link, Route, BrowserRouter} from \"react-router-dom\";\nimport {connect} from \"react-redux\";\nimport CommentBox from \"components/CommentBox\";\nimport CommentList from \"components/CommentList\";\nimport {changeAuth} from \"actions\";\n\nclass App extends Component {\n    renderButton = () => !this.props.auth ? <span className=\"item\" onClick={() => this.props.changeAuth(true)}><i\n            className=\"sign-in blue icon\"/>SIGN IN</span> :\n        <span className=\"item\" onClick={() => this.props.changeAuth(false)}><i className=\"sign-out blue icon\"/>SIGN OUT</span>\n\n    renderMenu() {\n        return (\n            <div className=\"ui compact vertical labeled icon menu\">\n                <Link to=\"/\" className=\"item\">\n                    <i className=\"cloud download blue icon\"/>\n                    POSTS\n                </Link>\n                <Link to=\"/post\" className=\"item\">\n                    <i className=\"cloud upload blue icon\"/>\n                    ADD POST\n                </Link>\n                <Link to=\"/post\" className=\"item\">\n                    {this.renderButton()}\n                </Link>\n                <a className=\"item\"\n                   href=\"https://youtu.be/PnRxuUqYKws?t=35\"\n                   target=\"_blank\"\n                   rel=\"noopener noreferrer\"\n                >\n                    <i className=\"video play blue icon\"/>\n                    VIDEOS\n                </a>\n            </div>\n        )\n    }\n\n    render() {\n        return (\n            <div className=\"ui container\">\n                <h1 className=\"ui header center aligned blue\" style={{paddingTop: '20px'}}>\n                    React Redux Posts with Middleware</h1>\n                <div className=\"ui placeholder segment\">\n                    <div className=\"ui two column stackable center aligned grid\">\n                        <div className=\"middle aligned row\">\n                            <BrowserRouter>\n                                <Route path=\"/post\" component={CommentBox}/>\n                                <Route path=\"/\" exact component={CommentList}/>\n                                {this.renderMenu()}\n                            </BrowserRouter>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n\n}\n\nconst mapStateToProps = (state) => ({auth: state.auth})\n\nexport default connect(mapStateToProps, {changeAuth})(App)","import {combineReducers} from \"redux\";\nimport combineReducer from \"reducers/comments\";\nimport authReducer from \"reducers/auth\";\n\nexport default combineReducers({\n    comments: combineReducer,\n    auth: authReducer\n})","import {SAVE_COMMENT, FETCH_COMMENTS} from \"../actions/types\";\n\nexport default function (state = [], action) {\n    switch (action.type) {\n        case SAVE_COMMENT:\n            return [...state, action.payload]\n        case FETCH_COMMENTS:\n            const comments = action.payload.data.map(comment => comment.name)\n            return [...state, ...comments]\n        default:\n            return state;\n    }\n}","import {CHANGE_AUTH} from \"actions/types\";\n\nexport default function (state = false, action) {\n    switch (action.type) {\n        case CHANGE_AUTH:\n            return action.payload\n        default:\n            return state\n    }\n}","// MIDDLEWARE - checks:\n// 1) action has a Promise on its payload property\n// 2) wait for resolve Promise &:\n// 3.1) send action to the NEXT middleware\n// 3.2) gets its data, dispatch new action with data\n\nexport default ({dispatch}) => next => action => {\n    (!action.payload || !action.payload.then) ? next(action) : action.payload.then((response) => {\n        const newAction = {...action, payload: response};\n        dispatch(newAction);\n    })\n}","export default {\n    \"$schema\": \"http://json-schema.org/draft-07/schema\",\n    \"$id\": \"http://example.com/example.json\",\n    \"type\": \"object\",\n    \"title\": \"The root schema\",\n    \"description\": \"The root schema comprises the entire JSON document.\",\n    \"default\": {},\n    \"examples\": [\n        {\n            \"comments\": [\n                \"Comment #1\",\n                \"Comment #2\"\n            ],\n            \"auth\": true\n        }\n    ],\n    \"required\": [\n        \"comments\",\n        \"auth\"\n    ],\n    \"additionalProperties\": true,\n    \"properties\": {\n        \"comments\": {\n            \"$id\": \"#/properties/comments\",\n            \"type\": \"array\",\n            \"title\": \"The comments schema\",\n            \"description\": \"An explanation about the purpose of this instance.\",\n            \"default\": [],\n            \"examples\": [\n                [\n                    \"Comment #1\",\n                    \"Comment #2\"\n                ]\n            ],\n            \"additionalItems\": true,\n            \"items\": {\n                \"anyOf\": [\n                    {\n                        \"$id\": \"#/properties/comments/items/anyOf/0\",\n                        \"type\": \"string\",\n                        \"title\": \"The first anyOf schema\",\n                        \"description\": \"An explanation about the purpose of this instance.\",\n                        \"default\": \"\",\n                        \"examples\": [\n                            \"Comment #1\",\n                            \"Comment #2\"\n                        ]\n                    }\n                ],\n                \"$id\": \"#/properties/comments/items\"\n            }\n        },\n        \"auth\": {\n            \"$id\": \"#/properties/auth\",\n            \"type\": \"boolean\",\n            \"title\": \"The auth schema\",\n            \"description\": \"An explanation about the purpose of this instance.\",\n            \"default\": false,\n            \"examples\": [\n                true\n            ]\n        }\n    }\n}","import tv4 from \"tv4\";\nimport stateSchema from \"middlewares/stateSchema\";\n\nexport default ({dispatch, getState}) => next => action => {\n    next(action);\n\n    (!tv4.validate(getState(), stateSchema)) ? console.warn('Invalid state schema detected!') :\n        console.log('tv4.validate state: ', tv4.validate(getState(), stateSchema))\n}","import React from \"react\";\nimport {Provider} from \"react-redux\";\n\nimport {createStore, applyMiddleware, compose} from \"redux\";\nimport reducers from \"reducers\";\n\nimport asyncMiddleware from \"middlewares/async\";\nimport stateSchemaMiddleware from \"middlewares/stateValidator\";\n\nexport default ({children, initialState = {}}) => {\n\n    const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n    const store = createStore(\n        reducers,\n        initialState,\n        composeEnhancers(applyMiddleware(asyncMiddleware, stateSchemaMiddleware)));\n\n    return (\n        <Provider store={store}>\n            {children}\n        </Provider>\n    )\n}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {BrowserRouter, Route} from \"react-router-dom\";\n\nimport App from \"components/App\";\nimport Root from \"Root\";\n\nReactDOM.render(\n    <Root>\n        <BrowserRouter>\n            <Route path=\"/\" component={App}/>\n        </BrowserRouter>\n    </Root>,\n    document.querySelector('#root')\n)\n"],"sourceRoot":""}